<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GAME_TITLE Review - Caleb Harmon</title>
    <meta name="description" content="REVIEW_DESCRIPTION">
    <meta name="keywords" content="game review, GAME_TITLE, GENRE, PLATFORM, video game review">
    <meta name="author" content="Caleb Harmon">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://harmonc.github.io/reviews/REVIEW_FILE.html">
    <meta property="og:title" content="GAME_TITLE Review - Caleb Harmon">
    <meta property="og:description" content="REVIEW_DESCRIPTION">
    <meta property="og:image" content="https://harmonc.github.io/images/reviews/mio/mio-title.png">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../styles.css">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Review",
        "itemReviewed": {
            "@type": "VideoGame",
            "name": "GAME_TITLE",
            "description": "GAME_DESCRIPTION",
            "genre": ["GENRE"],
            "platform": ["PLATFORM"],
            "datePublished": "RELEASE_DATE"
        },
        "author": {
            "@type": "Person",
            "name": "Caleb Harmon"
        },
        "reviewRating": {
            "@type": "Rating",
            "ratingValue": "RATING_NUMBER",
            "bestRating": "10"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Caleb Harmon"
        },
        "datePublished": "REVIEW_DATE"
    }
    </script>
</head>
<body class="reviews-page review-page">
    <div id="scroll-progress"></div>
    
    <main id="review-app">
        <!-- Loading State -->
        <div id="loading" class="loading-state">
            <div class="loading-spinner"></div>
            <p>Loading review...</p>
        </div>

        <!-- Error State -->
        <div id="error" class="error-state" style="display: none;">
            <div class="error-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <h2>Review Not Found</h2>
            <p>The requested review could not be loaded. Please check the URL and try again.</p>
            <a href="../blog.html" class="back-to-blog">← Back to Blog</a>
        </div>

        <!-- Review Content (Dynamically Populated) -->
        <div id="review-content-dynamic" style="display: none;">
            <!-- Review Hero Section -->
            <section id="review-hero" class="section">
                <div class="container" style="max-width: none; padding: 0 2rem; width: 100%;">
                    <div class="review-hero-content">
                        <div class="review-hero-left">
                            <div class="review-breadcrumb">
                                <a href="../blog.html"><i class="fas fa-arrow-left"></i> Back to Blog</a>
                                <span class="breadcrumb-separator">/</span>
                                <a href="../blog.html#video-game-reviews">Video Game Reviews</a>
                            </div>
                            <h1 class="review-title" id="review-title">GAME_TITLE</h1>
                            <div class="review-meta">
                                <span class="review-date" id="review-date">REVIEW_DATE</span>
                                <span class="review-genre" id="review-genre">GENRE</span>
                                <span class="review-platform" id="review-platform">PLATFORM</span>
                            </div>
                            <div class="review-rating-hero">
                                <div class="rating-stars" id="rating-stars">
                                    RATING_STARS
                                </div>
                                <span class="rating-text" id="rating-text">RATING_TEXT</span>
                            </div>
                            <div class="review-tags" id="review-tags">
                                TAGS
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Info Section -->
            <section id="game-info" class="section">
                <div class="container" style="max-width: none; padding: 0 2rem; width: 100%;">
                    <div class="game-info-grid">
                        <div class="game-info-card">
                            <h3><i class="fas fa-gamepad"></i> Game Details</h3>
                            <div class="game-details">
                                <div class="detail-item">
                                    <span class="detail-label">Developer:</span>
                                    <span class="detail-value" id="developer">DEVELOPER</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Publisher:</span>
                                    <span class="detail-value" id="publisher">PUBLISHER</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Release Date:</span>
                                    <span class="detail-value" id="release-date">RELEASE_DATE</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Platforms:</span>
                                    <span class="detail-value" id="platforms">PLATFORMS</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Genre:</span>
                                    <span class="detail-value" id="genres">GENRES</span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">Play Time:</span>
                                    <span class="detail-value" id="play-time">PLAY_TIME</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="game-info-card">
                            <h3><i class="fas fa-star"></i> Quick Verdict</h3>
                            <div class="quick-verdict">
                                <div class="verdict-rating">
                                    <span class="verdict-score" id="verdict-score">RATING_NUMBER</span>
                                    <span class="verdict-max">/10</span>
                                </div>
                                <p class="verdict-text" id="quick-verdict">QUICK_VERDICT</p>
                                <div class="verdict-recommendation" id="verdict-recommendation">
                                    <i class="fas RECOMMENDATION_ICON"></i>
                                    <span id="recommendation-text">RECOMMENDATION_TEXT</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Review Content Section -->
            <section id="review-content" class="section">
                <div class="container" style="max-width: none; padding: 0 2rem; width: 100%;">
                    <div class="review-main-content" style="margin-right: 5px;">
                        <div class="review-section">
                            <div class="section-top-cap"></div>
                            <h2><i class="fas fa-book-open"></i> Review</h2>
                            <div class="review-text" id="review-text">
                                REVIEW_CONTENT
                            </div>
                        </div>

                        <!-- Pros and Cons Section -->
                        <div class="review-section">
                            <div class="section-top-cap"></div>
                            <h2><i class="fas fa-balance-scale"></i> Pros & Cons</h2>
                            <div class="pros-cons-grid">
                                <div class="pros-section">
                                    <h3><i class="fas fa-thumbs-up"></i> Pros</h3>
                                    <ul class="pros-list" id="pros-list">
                                        PROS_LIST
                                    </ul>
                                </div>
                                <div class="cons-section">
                                    <h3><i class="fas fa-thumbs-down"></i> Cons</h3>
                                    <ul class="cons-list" id="cons-list">
                                        CONS_LIST
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- Technical Details Section -->
                        <div class="review-section">
                            <div class="section-top-cap"></div>
                            <h2><i class="fas fa-cog"></i> Technical Details</h2>
                            <div class="technical-details">
                                <div class="tech-grid" id="tech-grid">
                                    TECHNICAL_DETAILS
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Final Verdict Section -->
            <section id="final-verdict" class="section">
                <div class="container" style="max-width: none; padding: 0 2rem; width: 100%;">
                    <div class="review-main-content" style="margin-right: 5px;">
                        <div class="verdict-content">
                            <h2><i class="fas fa-gavel"></i> Final Verdict</h2>
                            <div class="verdict-summary">
                                <div class="verdict-rating-large">
                                    <span class="verdict-score-large" id="final-verdict-score">RATING_NUMBER</span>
                                    <span class="verdict-max-large">/10</span>
                                </div>
                                <div class="verdict-text-large">
                                    <p id="final-verdict-text">FINAL_VERDICT</p>
                                    <div class="verdict-recommendation-large" id="final-recommendation">
                                        <i class="fas RECOMMENDATION_ICON"></i>
                                        <span id="final-recommendation-text">RECOMMENDATION_TEXT</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2026 Caleb Harmon. All rights reserved.</p>
            <p><a href="../index.html">← Back to Portfolio</a> | <a href="../blog.html">← Back to Blog</a></p>
        </div>
    </footer>

    <button id="scroll-to-top" class="scroll-to-top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <script src="../script.js"></script>
    <script>
        // Dynamic Review Loader
        class ReviewLoader {
            constructor() {
                this.config = null;
                this.currentReview = null;
                this.init();
            }

            async init() {
                try {
                    await this.loadConfig();
                    this.loadReviewFromUrl();
                } catch (error) {
                    this.showError();
                }
            }

            async loadConfig() {
                try {
                    const response = await fetch('reviews-config.json');
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    this.config = await response.json();
                    console.log('Loaded config:', this.config);
                } catch (error) {
                    console.error('Error loading config:', error);
                    throw error;
                }
            }

            loadReviewFromUrl() {
                const urlParams = new URLSearchParams(window.location.search);
                
                console.log('=== DEBUG INFO ===');
                console.log('Full URL:', window.location.href);
                console.log('Search string:', window.location.search);
                
                // Get review ID from URL parameter
                const reviewId = urlParams.get('id');
                console.log('Review ID from URL:', reviewId);
                console.log('Available reviews:', this.config.reviews.map(r => r.id));
                
                if (reviewId) {
                    this.currentReview = this.config.reviews.find(r => r.id === reviewId);
                    console.log('Found review:', this.currentReview);
                    
                    if (this.currentReview) {
                        this.renderReview();
                        this.updateMetaTags();
                    } else {
                        console.log('Review not found for ID:', reviewId);
                        this.showError();
                    }
                } else {
                    console.log('No review ID provided in URL');
                    this.showError();
                }
            }

            updateMetaTags() {
                if (!this.currentReview) return;
                
                // Update title
                document.title = `${this.currentReview.title} Review - Caleb Harmon`;
                
                // Update meta description
                const metaDesc = document.querySelector('meta[name="description"]');
                if (metaDesc) {
                    metaDesc.content = `A comprehensive review of ${this.currentReview.title}, a ${this.currentReview.genre} game that combines beautiful art design with engaging exploration mechanics.`;
                }
                
                // Update Open Graph
                const ogTitle = document.querySelector('meta[property="og:title"]');
                const ogDesc = document.querySelector('meta[property="og:description"]');
                const ogImage = document.querySelector('meta[property="og:image"]');
                
                if (ogTitle) ogTitle.content = `${this.currentReview.title} Review - Caleb Harmon`;
                if (ogDesc) ogDesc.content = `A comprehensive review of ${this.currentReview.title}, a ${this.currentReview.genre} game that combines beautiful art design with engaging exploration mechanics.`;
                if (ogImage && this.currentReview.backgroundImage) ogImage.content = `https://harmonc.github.io/images/reviews/${this.currentReview.id}/${this.currentReview.backgroundImage}`;
                
                // Update structured data
                const structuredData = document.querySelector('script[type="application/ld+json"]');
                if (structuredData) {
                    const data = JSON.parse(structuredData.textContent);
                    data.itemReviewed.name = this.currentReview.title;
                    data.itemReviewed.genre = [this.currentReview.genre];
                    data.itemReviewed.platform = [this.currentReview.platform];
                    data.reviewRating.ratingValue = this.currentReview.rating;
                    data.datePublished = this.currentReview.reviewDate;
                    structuredData.textContent = JSON.stringify(data, null, 2);
                }
            }

            renderReview() {
                if (!this.currentReview) {
                    console.error('No current review to render');
                    return;
                }

                console.log('Starting render of:', this.currentReview.title);

                // Hide loading, show content
                const loadingEl = document.getElementById('loading');
                const errorEl = document.getElementById('error');
                const contentEl = document.getElementById('review-content-dynamic');
                
                if (loadingEl) loadingEl.style.display = 'none';
                if (errorEl) errorEl.style.display = 'none';
                if (contentEl) contentEl.style.display = 'block';

                // Wait for DOM update before accessing elements
                requestAnimationFrame(() => {
                    this.populateReviewContent();
                });
            }

            populateReviewContent() {
                const currentReview = this.currentReview;

                // Set background image if exists
                if (currentReview.backgroundImage) {
                    const heroSection = document.getElementById('review-hero');
                    if (heroSection) {
                        heroSection.style.background = `linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.6)), url('../images/reviews/${currentReview.id}/${currentReview.backgroundImage}')`;
                        heroSection.style.backgroundSize = 'cover';
                        heroSection.style.backgroundPosition = 'center';
                        heroSection.style.backgroundAttachment = 'fixed';
                    }
                }

                // Helper function to safely set text
                const safeSetText = (id, text) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.textContent = text;
                        console.log(`Set ${id}:`, text);
                    } else {
                        console.warn(`Element not found: ${id}`);
                    }
                };

                const safeSetHtml = (id, html) => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.innerHTML = html;
                        console.log(`Set HTML ${id}:`, html);
                    } else {
                        console.warn(`Element not found: ${id}`);
                    }
                };

                // Populate basic info
                safeSetText('review-title', currentReview.title);
                safeSetText('review-date', currentReview.reviewDate);
                safeSetText('review-genre', currentReview.genre);
                safeSetText('review-platform', currentReview.platform);
                safeSetText('developer', currentReview.developer);
                safeSetText('publisher', currentReview.publisher);
                safeSetText('release-date', currentReview.releaseDate);
                safeSetText('platforms', currentReview.platforms);
                safeSetText('genres', currentReview.genres);
                safeSetText('play-time', currentReview.playTime);
                safeSetText('quick-verdict', currentReview.quickVerdict);
                safeSetText('final-verdict', currentReview.finalVerdict);

                // Populate rating
                safeSetHtml('rating-stars', currentReview.ratingStars.join(''));
                safeSetText('rating-text', currentReview.ratingText);
                safeSetText('verdict-score', currentReview.rating);
                safeSetText('final-verdict-score', currentReview.rating);

                // Populate tags
                const tagsContainer = document.getElementById('review-tags');
                if (tagsContainer) {
                    tagsContainer.innerHTML = currentReview.tags.map(tag => 
                        `<span class="${tag.class}">${tag.name}</span>`
                    ).join('');
                }

                // Populate recommendation
                const recIcon = currentReview.recommendation.icon;
                const recText = currentReview.recommendation.text;
                safeSetHtml('verdict-recommendation', 
                    `<i class="fas ${recIcon}"></i>
                     <span>${recText}</span>`
                );
                safeSetHtml('final-recommendation', 
                    `<i class="fas ${recIcon}"></i>
                     <span>${recText}</span>`
                );

                // Populate review content
                const reviewContent = document.getElementById('review-text');
                if (reviewContent) {
                    reviewContent.innerHTML = currentReview.reviewContent
                        .map(paragraph => `<p>${paragraph}</p>`)
                        .join('');
                }

                // Populate pros and cons
                const prosList = document.getElementById('pros-list');
                if (prosList) {
                    prosList.innerHTML = currentReview.pros
                        .map(pro => `<li>${pro}</li>`)
                        .join('');
                }

                const consList = document.getElementById('cons-list');
                if (consList) {
                    consList.innerHTML = currentReview.cons
                        .map(con => `<li>${con}</li>`)
                        .join('');
                }

                // Populate technical details
                const techGrid = document.getElementById('tech-grid');
                if (techGrid) {
                    const techDetails = currentReview.technicalDetails;
                    techGrid.innerHTML = Object.values(techDetails)
                        .map(tech => `
                            <div class="tech-item">
                                <span class="tech-label">${tech.label}</span>
                                <span class="tech-value">${tech.value}</span>
                            </div>
                        `).join('');
                }

                console.log('Review render complete');
            }

            setText(id, text) {
                const element = document.getElementById(id);
                if (element) element.textContent = text;
            }

            setHtml(id, html) {
                const element = document.getElementById(id);
                if (element) element.innerHTML = html;
            }

            showError() {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
            }
        }

        // Initialize the review loader
        document.addEventListener('DOMContentLoaded', () => {
            new ReviewLoader();
        });
    </script>
</body>
</html>